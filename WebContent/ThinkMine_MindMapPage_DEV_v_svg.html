<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Template &middot; Bootstrap</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="css/bootstrap/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 20px;
        padding-bottom: 60px;
      }

      /* Custom container */
      .container {
        margin: 0 auto;
        max-width: 1000px;
      }
      .container > hr {
        margin: 60px 0;
      }

      /* Main marketing message and sign up button */
      .jumbotron {
        margin: 80px 0;
        text-align: center;
      }
      .jumbotron h1 {
        font-size: 100px;
        line-height: 1;
      }
      .jumbotron .lead {
        font-size: 24px;
        line-height: 1.25;
      }
      .jumbotron .btn {
        font-size: 21px;
        padding: 14px 24px;
      }

      /* Supporting marketing content */
      .marketing {
        margin: 60px 0;
      }
      .marketing p + h4 {
        margin-top: 28px;
      }


      /* Customize the navbar links to be fill the entire space of the .navbar */
      .navbar .navbar-inner {
        padding: 0;
      }
      .navbar .nav {
        margin: 0;
        display: table;
        width: 100%;
      }
      .navbar .nav li {
        display: table-cell;
        width: 1%;
        float: none;
      }
      .navbar .nav li a {
        font-weight: bold;
        text-align: center;
        border-left: 1px solid rgba(255,255,255,.75);
        border-right: 1px solid rgba(0,0,0,.1);
      }
      .navbar .nav li:first-child a {
        border-left: 0;
        border-radius: 3px 0 0 3px;
      }
      .navbar .nav li:last-child a {
        border-right: 0;
        border-radius: 0 3px 3px 0;
      }
    </style>
    <link href="css/bootstrap/bootstrap-responsive.css" rel="stylesheet">
	
	<script src="ThinkMineLib.js"></script>
	<script src="js/script.js"></script>
	<script type="text/javascript">


		
	</script>

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="../assets/js/html5shiv.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="res/ico/bootstrap/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="res/ico/bootstrap/apple-touch-icon-114-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="res/ico/bootstrap/apple-touch-icon-72-precomposed.png">
                    <link rel="apple-touch-icon-precomposed" href="res/ico/bootstrap/apple-touch-icon-57-precomposed.png">
                                   <link rel="shortcut icon" href="res/ico/bootstrap/favicon.png">
  </head>

  <body>
	<input type="file">
	<div id="group_div_shape" style="margin: 0 auto;">
		<div id="div_circleshape" width='50' height='50'  style="float:left;">
			<img src="res/CircleShape.png" id="CircleShapeImage" width='50' height='50' />
		</div>
		<div id="div_rectangleshape" width='50' height='50'  style="float:left;">
			<img src="res/RectangleShape.png" id="RectangleShapeImage" width='50' height='50' />
		</div>
		<div id="div_starshape" width='50' height='50' style="float:left;">
			<img src="res/StarShape.png" id="StarShapeImage" width='50' height='50' />
		</div>
		<div id="div_polygonshape" width='50' height='50'>
			<img src="res/PolygonShape.png" id="PolygonShapeImage" width='50' height='50' />
		</div>
	</div>
	
	
	<div class="progress">
	  <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%">
		<span class="sr-only">40% Complete (success)</span>
	  </div>
	</div>
	<div class="progress">
  <div class="progress-bar progress-bar-striped active"  role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 45%">
    <span class="sr-only">45% Complete</span>
  </div>
</div>
	
	
	<button type="button" class="btn btn-primary" data-toggle="button">Single toggle</button>
	<div class="btn-group" data-toggle="buttons">
		<label class="btn btn-primary active">
			<input type="radio" name="options" id="NotSel" checked> Not select
		</label>
		<label class="btn btn-primary">
			<input type="radio" name="options" id="Shape1"> Circle
		</label>
		<label class="btn btn-primary">
			<input type="radio" name="options" id="Shape2"> Rectangle
		</label>
		<label class="btn btn-primary">
			<input type="radio" name="options" id="Shape3"> Star
		</label>
		<label class="btn btn-primary">
			<input type="radio" name="options" id="Shape4"> Polygon
		</label>
	</div>
	
	<div class="dropdown" id="dd_shapetype">
	  <button class="btn btn-default dropdown-toggle" type="button" id="btn_shapetype" data-toggle="dropdown">
		Select Shape
		<span class="caret"></span>
	  </button>
	  <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
	  	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Not select</a></li>
		<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Circle</a></li>
		<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Rectangle</a></li>
		<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Star</a></li>
		<!--<li role="presentation" class="divider"></li>-->
		<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Polygon</a></li>
	  </ul>
	</div>
	
    <div class="container">

      <div class="masthead">
        <h3 class="muted">Think Mine</h3>
        <div class="navbar">
          <div class="navbar-inner">
            <div class="container">
              <ul class="nav">
                <li class="active"><a href="#">Home</a></li>
                <li><a href="#">Your Idea Projects</a></li>
                <li><a href="#">....</a></li>
                <li><a href="#">....</a></li>
                <li><a href="#">....</a></li>
                <li><a href="#">....</a></li>
              </ul>
            </div>
          </div>
        </div><!-- /.navbar -->
      </div>


	<!--pointer-events: none;-->
	<div id="svgAndcanvas" style="margin: 0 auto;">
		<div id="svg" width='600' height='1000'  style="position:absolute;z-index:110; pointer-events: auto;" >
			<svg id="svgHost" width="2000" height="2000" >
				<path id="toolBoxRectangle" d="M0 0 L300 0 L300 300 L0 300 Z" fill="yellow"  xlink:href="http://jenkov.com/images/layout/top-bar-logo.png"/>

				Sorry, your browser does not support inline SVG.
		  <!--<image id="color-picker" x="20" y="20" width="100" height="100"
			xlink:href="color-picker.png" />-->
			<switch>
			<foreignObject width="400" height="400"
                   requiredExtensions="http://example.com/SVGExtensions/EmbeddedXHTML">
			<body xmlns="http://www.w3.org/1999/xhtml">
			adfnaldjkfnalkdjfnaldjk
		<table>
			<tr>
				<td valign="top">
					<div id="cp1_ColorMap" style="width:256px;"></div>
				</td>
				<td valign="top">
					<div id="cp1_ColorBar"></div>
				</td>
	
				<td valign="top">
	
					<table>
						<tr>
							<td colspan="3">
								<div id="cp1_Preview" style="background-color: #fff; width: 60px; height: 60px; padding: 0; margin: 0; border: solid 1px #000;">
									<br />
								</div>
							</td>
						</tr>
						<tr>
							<td>
								<input type="radio" id="cp1_HueRadio" name="cp1_Mode" value="0" />
							</td>
							<td>
								<label for="cp1_HueRadio">H:</label>
							</td>
							<td>
								<input type="text" id="cp1_Hue" value="0" style="width: 40px;" /> &deg;
							</td>
						</tr>
	
						<tr>
							<td>
								<input type="radio" id="cp1_SaturationRadio" name="cp1_Mode" value="1" />
							</td>
							<td>
								<label for="cp1_SaturationRadio">S:</label>
							</td>
							<td>
								<input type="text" id="cp1_Saturation" value="100" style="width: 40px;" /> %
							</td>
						</tr>
	
						<tr>
							<td>
								<input type="radio" id="cp1_BrightnessRadio" name="cp1_Mode" value="2" />
							</td>
							<td>
								<label for="cp1_BrightnessRadio">B:</label>
							</td>
							<td>
								<input type="text" id="cp1_Brightness" value="100" style="width: 40px;" /> %
							</td>
						</tr>
	
						<tr>
							<td colspan="3" height="5">
	
							</td>
						</tr>
	
						<tr>
							<td>
								<input type="radio" id="cp1_RedRadio" name="cp1_Mode" value="r" />
							</td>
							<td>
								<label for="cp1_RedRadio">R:</label>
							</td>
							<td>
								<input type="text" id="cp1_Red" value="255" style="width: 40px;" />
							</td>
						</tr>
	
						<tr>
							<td>
								<input type="radio" id="cp1_GreenRadio" name="cp1_Mode" value="g" />
							</td>
							<td>
								<label for="cp1_GreenRadio">G:</label>
							</td>
							<td>
								<input type="text" id="cp1_Green" value="0" style="width: 40px;" />
							</td>
						</tr>
	
						<tr>
							<td>
								<input type="radio" id="cp1_BlueRadio" name="cp1_Mode" value="b" />
							</td>
							<td>
								<label for="cp1_BlueRadio">B:</label>
							</td>
							<td>
								<input type="text" id="cp1_Blue" value="0" style="width: 40px;" />
							</td>
						</tr>
	
	
						<tr>
							<td>
								#:
							</td>
							<td colspan="2">
								<input type="text" id="cp1_Hex" value="FF0000" style="width: 60px;" />
							</td>
						</tr>
	
					</table>
				</td>
			</tr>
		</table>
		
	
	<div style="display:none;">
		<img src="refresh_web/colorpicker/images/rangearrows.gif" />
		<img src="refresh_web/colorpicker/images/mappoint.gif" />
		
		<img src="refresh_web/colorpicker/images/bar-saturation.png" />
		<img src="refresh_web/colorpicker/images/bar-brightness.png" />
		
		<img src="refresh_web/colorpicker/images/bar-blue-tl.png" />
		<img src="refresh_web/colorpicker/images/bar-blue-tr.png" />
		<img src="refresh_web/colorpicker/images/bar-blue-bl.png" />
		<img src="refresh_web/colorpicker/images/bar-blue-br.png" />
		<img src="refresh_web/colorpicker/images/bar-red-tl.png" />
		<img src="refresh_web/colorpicker/images/bar-red-tr.png" />
		<img src="refresh_web/colorpicker/images/bar-red-bl.png" />
		<img src="refresh_web/colorpicker/images/bar-red-br.png" />	
		<img src="refresh_web/colorpicker/images/bar-green-tl.png" />
		<img src="refresh_web/colorpicker/images/bar-green-tr.png" />
		<img src="refresh_web/colorpicker/images/bar-green-bl.png" />
		<img src="refresh_web/colorpicker/images/bar-green-br.png" />
		
		<img src="refresh_web/colorpicker/images/map-red-max.png" />
		<img src="refresh_web/colorpicker/images/map-red-min.png" />
		<img src="refresh_web/colorpicker/images/map-green-max.png" />
		<img src="refresh_web/colorpicker/images/map-green-min.png" />
		<img src="refresh_web/colorpicker/images/map-blue-max.png" />
		<img src="refresh_web/colorpicker/images/map-blue-min.png" />
		
		<img src="refresh_web/colorpicker/images/map-saturation.png" />
		<img src="refresh_web/colorpicker/images/map-saturation-overlay.png" />
		<img src="refresh_web/colorpicker/images/map-brightness.png" />
		<img src="refresh_web/colorpicker/images/map-hue.png" />
		
		
		
	</div>			
			</body>
			
			
				   
			</foreignObject>
			</switch>
			  <switch>
    <!-- Process the embedded XHTML if the requiredExtensions attribute
         evaluates to TRUE (that is, the browser supports XHTML
         embedded within SVG). -->
    <foreignObject width="100" height="50"
                   requiredExtensions="http://example.com/SVGExtensions/EmbeddedXHTML">
      <!-- XHTML content goes here -->
      <body xmlns="http://www.w3.org/1999/xhtml">
        <p>Here is a paragraph that requires word wrap.</p>
      </body>
    </foreignObject>
    <!-- ELSE, process the following alternate SVG.
         Note that there are no testing attributes on the <text> element.
         If no testing attributes are provided, it is as if there
         were testing attributes and they evaluated to TRUE.-->
    <text font-size="10" font-family="Verdana">
      <tspan x="10" y="10">Here is a paragraph that</tspan>
      <tspan x="10" y="20">requires word wrap.</tspan>
    </text>
  </switch>
			</svg> 
			
		
		</div>
		<div id="colorpicker" width='500' height='500'  style="position:absolute;z-index:120; pointer-events: auto;" >

	</div>
		<div id="canvas" width='600' height='1000' style="position:absolute;z-index:100;">
			<canvas id="myCanvas" height = "600" width="1000"></canvas>		
		</div>
	</div>

      <hr>

      <div class="footer">
        <p>&copy; ThinkeMine 2014</p>
      </div>

    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <!--<script src="js/bootstrap/jquery.js"></script>
    <script src="js/bootstrap/bootstrap-transition.js"></script>
    <script src="js/bootstrap/bootstrap-alert.js"></script>
    <script src="js/bootstrap/bootstrap-modal.js"></script>
    <script src="js/bootstrap/bootstrap-dropdown.js"></script>
    <script src="js/bootstrap/bootstrap-scrollspy.js"></script>
    <script src="js/bootstrap/bootstrap-tab.js"></script>
    <script src="js/bootstrap/bootstrap-tooltip.js"></script>
    <script src="js/bootstrap/bootstrap-popover.js"></script>
    <script src="js/bootstrap/bootstrap-button.js"></script>
    <script src="js/bootstrap/bootstrap-collapse.js"></script>
    <script src="js/bootstrap/bootstrap-carousel.js"></script>
    <script src="js/bootstrap/bootstrap-typeahead.js"></script>-->
	
	
	
		<!--	<script type="text/javascript" src="refresh_web/prototype.js" ></script>
		<script type="text/javascript" src="refresh_web/colorpicker/colormethods.js" ></script>
		<script type="text/javascript" src="refresh_web/colorpicker/colorvaluepicker.js" ></script>
		<script type="text/javascript" src="refresh_web/colorpicker/slider.js" ></script>
		<script type="text/javascript" src="refresh_web/colorpicker/colorpicker.js" ></script>
		
			<script type="text/javascript">
	
	Event.observe(window,'load',function() {
		cp1 = new Refresh.Web.ColorPicker('cp1', {startHex: 'ffcc00', startMode:'s'});
	});
	
	
	</script>
	
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-3734687-9']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> -->
	
	
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script src="bootstrap/js/bootstrap.min.js"></script>
	<script>
			var TMCanvas;
			var wrappedEventHandler;
			window.onload = function() {
			com.local.SVGHandlers.Initialize();
			//setUpPaperLib('myCanvas');
			

	//	var ms;
//Today = new Date();
//Prev = new Date('1970-01-01');
//var a = Prev-Today
//ms = a.getMilliseconds(); 
	
	
//	console.log(ms);
			
	
			setUpPaperLib('myCanvas');
			var drawing_Interface = new PaperJS_DrawingInterface("PaperJS",'myCanvas');			
			var collisionCheck_Interface = new PaperJS_CollisionCheckInterface();
			TMCanvas = new ThinkMineCanvas(drawing_Interface,collisionCheck_Interface);
			
			
			wrappedEventHandler = new WrappedPaperJSEventHandler();
			wrappedEventHandler.setOnMouseDown(function(event){					
		
													wrappedEventHandler.dragCount = 0;
													TMCanvas.onMouseDownInterface(event.point.x,event.point.y,0);
												});
			wrappedEventHandler.setOnMouseUp(function(event){					
		
													TMCanvas.onMouseUpInterface(event.point.x,event.point.y,0);
													
												});
			wrappedEventHandler.setOnMouseDrag(function(event){

													wrappedEventHandler.dragCount++;
													
													if(wrappedEventHandler.dragCount>1)
														TMCanvas.onMouseDragInterface(event.point.x,event.point.y,0);
																	
														
														
												});
			wrappedEventHandler.setOnMouseMove(function(event){
													TMCanvas.onMouseMoveInterface(event.point.x,event.point.y,0);
													
												});
							//wrappedEventHandler.setOnKeyDown(TMCanvas.onKeyDownInterface);
			//wrappedEventHandler.setOnCompositionStart(TMCanvas.onCompositionEventStartInterface);
		//	wrappedEventHandler.setOnCompositionUpdate(TMCanvas.onCompositionEventUpdateInterface);
			//wrappedEventHandler.setOnCompositionEnd(TMCanvas.onCompositionEventEndInterface);
			
			initPaperJSMindMap(1000,600,wrappedEventHandler);

			
			//var layer = paper.project.activeLayer;


			

			//var layer = new paper.Layer();
			
			
			
			/*var onMD = 
			
			var onMU = function(event){
				TMCanvas.onMouseUpInterface(event.point.x,event.point.y,0);
			}
			var onBGMU = function(event){
				TMCanvas.onBGMouseUpInterface(event.point.x,event.point.y,0);
			}
			
			var onMDr = function(event){
				TMCanvas.onMouseDragInterface(event.point.x,event.point.y,0);
			}*/
			
			/*layer.on({mousedown : onMD,
				mouseup : onMU,
				mousedrag : onMDr});*/
				
			//firstLayer.onMouseUp = onBGMU;


			TMCanvas.connectToServer();
			//TMCanvas.initWithMindMap("5419a2a443caa5a02237ae41");
			
			TMCanvas.initWithMindMap("");
			//TMCanvas.initWithMindMap("5447c235e95398a80b6b451a");
			
			var lastDownTarget, canvas;

			
			canvas = document.getElementById('myCanvas');
			
			
			
			document.addEventListener('mousedown', function(event) {
				lastDownTarget = event.target;			   
			}, false);

			    
			document.addEventListener('paste', function(event) {			        
				if(lastDownTarget == canvas) {
					//alert("aa");
					//window.clipboardData.setData("text","aaaa");
					//alert(window.clipboardData.getData("text"));
					TMCanvas.onPasteInterface(event);
					//TMCanvas.onPaste(event);			        
				}			    
			}, false);
			
			
			
		}
		$(function(){		
			$("#CircleShapeImage").click(function(){
				TMCanvas.enableObjectAddMode();
				TMCanvas.setMenuSelectedShape(0);
				TMCanvas.setMenuInsertedSDI(new CircleShapeTypeDependentInfo(10,"#FF0000"));
				TMCanvas.setMenuSelectedContents(0);
				TMCanvas.setMenuInsertedCDI(new TextContentsTypeDependentInfo("#FFFFFF",'Courier New','bold',25));
				TMCanvas.setMenuInsertedCV("UI Interaction Test");
				}); 
		});
		
		$(function(){
			$("#RectangleShapeImage").click(function(){
				TMCanvas.enableObjectAddMode();
				TMCanvas.setMenuSelectedShape(1);
				TMCanvas.setMenuInsertedSDI(new RectangleShapeTypeDependentInfo(10, 10, "#FF0000", true));
				TMCanvas.setMenuSelectedContents(0);
				TMCanvas.setMenuInsertedCDI(new TextContentsTypeDependentInfo("#FFFFFF",'Courier New','bold',25));
				TMCanvas.setMenuInsertedCV("UI Interaction Test");
				}); 
		});
		
		$(function(){
			$("#StarShapeImage").click(function(){
				TMCanvas.enableObjectAddMode();
				TMCanvas.setMenuSelectedShape(2);
				TMCanvas.setMenuInsertedSDI(new StarShapeTypeDependentInfo(5, 150, 75,"#000F00"));
				TMCanvas.setMenuSelectedContents(0);
				TMCanvas.setMenuInsertedCDI(new TextContentsTypeDependentInfo("#FFFFFF",'Courier New','bold',25));
				TMCanvas.setMenuInsertedCV("UI Interaction Test");
				}); 
		});

		$(function(){
			$("#PolygonShapeImage").click(function(){
				TMCanvas.enableObjectAddMode();
				TMCanvas.setMenuSelectedShape(3);
				TMCanvas.setMenuInsertedSDI(new PolygonShapeTypeDependentInfo(14, 10, "#00F0FF"));
				TMCanvas.setMenuSelectedContents(0);
				TMCanvas.setMenuInsertedCDI(new TextContentsTypeDependentInfo("#FFFFFF",'Courier New','bold',25));
				TMCanvas.setMenuInsertedCV("UI Interaction Test");
				}); 
		});
	
		$('#dd_shapetype').on('hide.bs.dropdown', function (event) {
		  console.log(event.relatedTarget);
		});

	</script>
  </body>
</html>
