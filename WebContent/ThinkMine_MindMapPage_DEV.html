<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Template &middot; Bootstrap</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="css/bootstrap/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 20px;
        padding-bottom: 60px;
      }

      /* Custom container */
      .container {
        margin: 0 auto;
        max-width: 1000px;
      }
      .container > hr {
        margin: 60px 0;
      }

      /* Main marketing message and sign up button */
      .jumbotron {
        margin: 80px 0;
        text-align: center;
      }
      .jumbotron h1 {
        font-size: 100px;
        line-height: 1;
      }
      .jumbotron .lead {
        font-size: 24px;
        line-height: 1.25;
      }
      .jumbotron .btn {
        font-size: 21px;
        padding: 14px 24px;
      }

      /* Supporting marketing content */
      .marketing {
        margin: 60px 0;
      }
      .marketing p + h4 {
        margin-top: 28px;
      }


      /* Customize the navbar links to be fill the entire space of the .navbar */
      .navbar .navbar-inner {
        padding: 0;
      }
      .navbar .nav {
        margin: 0;
        display: table;
        width: 100%;
      }
      .navbar .nav li {
        display: table-cell;
        width: 1%;
        float: none;
      }
      .navbar .nav li a {
        font-weight: bold;
        text-align: center;
        border-left: 1px solid rgba(255,255,255,.75);
        border-right: 1px solid rgba(0,0,0,.1);
      }
      .navbar .nav li:first-child a {
        border-left: 0;
        border-radius: 3px 0 0 3px;
      }
      .navbar .nav li:last-child a {
        border-right: 0;
        border-radius: 0 3px 3px 0;
      }
    </style>
    <link href="css/bootstrap/bootstrap-responsive.css" rel="stylesheet">
	
	<script src="ThinkMineLib.js"></script>
	<script type="text/javascript">


		
	</script>

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="../assets/js/html5shiv.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="res/ico/bootstrap/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="res/ico/bootstrap/apple-touch-icon-114-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="res/ico/bootstrap/apple-touch-icon-72-precomposed.png">
                    <link rel="apple-touch-icon-precomposed" href="res/ico/bootstrap/apple-touch-icon-57-precomposed.png">
                                   <link rel="shortcut icon" href="res/ico/bootstrap/favicon.png">
  </head>

  <body>
	<input type="file">
	<div id="group_div_shape" style="margin: 0 auto;">
		<div id="div_circleshape" width='50' height='50'  style="float:left;">
			<img src="res/CircleShape.png" id="CircleShapeImage" width='50' height='50' />
		</div>
		<div id="div_rectangleshape" width='50' height='50'  style="float:left;">
			<img src="res/RectangleShape.png" id="RectangleShapeImage" width='50' height='50' />
		</div>
		<div id="div_starshape" width='50' height='50' style="float:left;">
			<img src="res/StarShape.png" id="StarShapeImage" width='50' height='50' />
		</div>
		<div id="div_polygonshape" width='50' height='50'>
			<img src="res/PolygonShape.png" id="PolygonShapeImage" width='50' height='50' />
		</div>
	</div>
	
	
	<div class="progress">
	  <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%">
		<span class="sr-only">40% Complete (success)</span>
	  </div>
	</div>
	<div class="progress">
  <div class="progress-bar progress-bar-striped active"  role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 45%">
    <span class="sr-only">45% Complete</span>
  </div>
</div>
	
	
	<button type="button" class="btn btn-primary" data-toggle="button">Single toggle</button>
	<div class="btn-group" data-toggle="buttons">
		<label class="btn btn-primary active">
			<input type="radio" name="options" id="NotSel" checked> Not select
		</label>
		<label class="btn btn-primary">
			<input type="radio" name="options" id="Shape1"> Circle
		</label>
		<label class="btn btn-primary">
			<input type="radio" name="options" id="Shape2"> Rectangle
		</label>
		<label class="btn btn-primary">
			<input type="radio" name="options" id="Shape3"> Star
		</label>
		<label class="btn btn-primary">
			<input type="radio" name="options" id="Shape4"> Polygon
		</label>
	</div>
	
	<div class="dropdown" id="dd_shapetype">
	  <button class="btn btn-default dropdown-toggle" type="button" id="btn_shapetype" data-toggle="dropdown">
		Select Shape
		<span class="caret"></span>
	  </button>
	  <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
	  	<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Not select</a></li>
		<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Circle</a></li>
		<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Rectangle</a></li>
		<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Star</a></li>
		<!--<li role="presentation" class="divider"></li>-->
		<li role="presentation"><a role="menuitem" tabindex="-1" href="#">Polygon</a></li>
	  </ul>
	</div>
	
    <div class="container">

      <div class="masthead">
        <h3 class="muted">Think Mine</h3>
        <div class="navbar">
          <div class="navbar-inner">
            <div class="container">
              <ul class="nav">
                <li class="active"><a href="#">Home</a></li>
                <li><a href="#">Your Idea Projects</a></li>
                <li><a href="#">....</a></li>
                <li><a href="#">....</a></li>
                <li><a href="#">....</a></li>
                <li><a href="#">....</a></li>
              </ul>
            </div>
          </div>
        </div><!-- /.navbar -->
      </div>

 
	  <canvas id="myCanvas" height = "600" width="1000"></canvas>
      <hr>

      <div class="footer">
        <p>&copy; ThinkeMine 2014</p>
      </div>

    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <!--<script src="js/bootstrap/jquery.js"></script>
    <script src="js/bootstrap/bootstrap-transition.js"></script>
    <script src="js/bootstrap/bootstrap-alert.js"></script>
    <script src="js/bootstrap/bootstrap-modal.js"></script>
    <script src="js/bootstrap/bootstrap-dropdown.js"></script>
    <script src="js/bootstrap/bootstrap-scrollspy.js"></script>
    <script src="js/bootstrap/bootstrap-tab.js"></script>
    <script src="js/bootstrap/bootstrap-tooltip.js"></script>
    <script src="js/bootstrap/bootstrap-popover.js"></script>
    <script src="js/bootstrap/bootstrap-button.js"></script>
    <script src="js/bootstrap/bootstrap-collapse.js"></script>
    <script src="js/bootstrap/bootstrap-carousel.js"></script>
    <script src="js/bootstrap/bootstrap-typeahead.js"></script>-->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script src="bootstrap/js/bootstrap.min.js"></script>
	<script>
			var TMCanvas;
			window.onload = function() {
			//setUpPaperLib('myCanvas');
			

	//	var ms;
//Today = new Date();
//Prev = new Date('1970-01-01');
//var a = Prev-Today
//ms = a.getMilliseconds(); 
	
	
//	console.log(ms);
			
	
			setUpPaperLib('myCanvas');
			var drawing_Interface = new PaperJS_DrawingInterface("PaperJS",'myCanvas');			
			var collisionCheck_Interface = new PaperJS_CollisionCheckInterface();
			TMCanvas = new ThinkMineCanvas(drawing_Interface,collisionCheck_Interface);
			
			
			var wrappedEventHandler = new WrappedPaperJSEventHandler();
			wrappedEventHandler.setOnMouseDown(function(event){													
													wrappedEventHandler.dragCount = 0;
													TMCanvas.onMouseDownInterface(event.point.x,event.point.y,0);
												});
			wrappedEventHandler.setOnMouseUp(function(event){								
													TMCanvas.onMouseUpInterface(event.point.x,event.point.y,0);
												});
			wrappedEventHandler.setOnMouseDrag(function(event){
													wrappedEventHandler.dragCount++;
													if(wrappedEventHandler.dragCount>1)
														TMCanvas.onMouseDragInterface(event.point.x,event.point.y,0);
												});
			wrappedEventHandler.setOnMouseMove(function(event){
													TMCanvas.onMouseMoveInterface(event.point.x,event.point.y,0);
												});
			//wrappedEventHandler.setOnKeyDown(TMCanvas.onKeyDownInterface);
			//wrappedEventHandler.setOnCompositionStart(TMCanvas.onCompositionEventStartInterface);
		//	wrappedEventHandler.setOnCompositionUpdate(TMCanvas.onCompositionEventUpdateInterface);
			//wrappedEventHandler.setOnCompositionEnd(TMCanvas.onCompositionEventEndInterface);
			
			initPaperJSMindMap(1000,600,wrappedEventHandler);

			
			//var layer = paper.project.activeLayer;


			

			//var layer = new paper.Layer();
			
			
			
			/*var onMD = 
			
			var onMU = function(event){
				TMCanvas.onMouseUpInterface(event.point.x,event.point.y,0);
			}
			var onBGMU = function(event){
				TMCanvas.onBGMouseUpInterface(event.point.x,event.point.y,0);
			}
			
			var onMDr = function(event){
				TMCanvas.onMouseDragInterface(event.point.x,event.point.y,0);
			}*/
			
			/*layer.on({mousedown : onMD,
				mouseup : onMU,
				mousedrag : onMDr});*/
				
			//firstLayer.onMouseUp = onBGMU;


			TMCanvas.connectToServer();
			//TMCanvas.initWithMindMap("5419a2a443caa5a02237ae41");
			
			//TMCanvas.initWithMindMap("541afd10c856c42401abdc16");
			TMCanvas.initWithMindMap("");
			
			var lastDownTarget, canvas;

			
			canvas = document.getElementById('myCanvas');
			
			
			
			document.addEventListener('mousedown', function(event) {
				lastDownTarget = event.target;			   
			}, false);

			    
			document.addEventListener('paste', function(event) {			        
				if(lastDownTarget == canvas) {
					//alert("aa");
					//window.clipboardData.setData("text","aaaa");
					//alert(window.clipboardData.getData("text"));
					TMCanvas.onPasteInterface(event);
					//TMCanvas.onPaste(event);			        
				}			    
			}, false);
			
			
			
		}
		$(function(){		
			$("#CircleShapeImage").click(function(){
				TMCanvas.enableObjectAddMode();
				TMCanvas.setMenuSelectedShape(0);
				TMCanvas.setMenuInsertedSDI(new CircleShapeTypeDependentInfo(50,"#FF0000"));
				TMCanvas.setMenuSelectedContents(0);
				TMCanvas.setMenuInsertedCDI(new TextContentsTypeDependentInfo("#FFFFFF",'Courier New','bold',25));
				TMCanvas.setMenuInsertedCV("UI Interaction Test");
				}); 
		});
		
		$(function(){
			$("#RectangleShapeImage").click(function(){
				TMCanvas.enableObjectAddMode();
				TMCanvas.setMenuSelectedShape(1);
				TMCanvas.setMenuInsertedSDI(new RectangleShapeTypeDependentInfo(150, 150, "#FF0000", true));
				TMCanvas.setMenuSelectedContents(0);
				TMCanvas.setMenuInsertedCDI(new TextContentsTypeDependentInfo("#FFFFFF",'Courier New','bold',25));
				TMCanvas.setMenuInsertedCV("UI Interaction Test");
				}); 
		});
		
		$(function(){
			$("#StarShapeImage").click(function(){
				TMCanvas.enableObjectAddMode();
				TMCanvas.setMenuSelectedShape(2);
				TMCanvas.setMenuInsertedSDI(new StarShapeTypeDependentInfo(5, 150, 75,"#000F00"));
				TMCanvas.setMenuSelectedContents(0);
				TMCanvas.setMenuInsertedCDI(new TextContentsTypeDependentInfo("#FFFFFF",'Courier New','bold',25));
				TMCanvas.setMenuInsertedCV("UI Interaction Test");
				}); 
		});

		$(function(){
			$("#PolygonShapeImage").click(function(){
				TMCanvas.enableObjectAddMode();
				TMCanvas.setMenuSelectedShape(3);
				TMCanvas.setMenuInsertedSDI(new PolygonShapeTypeDependentInfo(14, 150, "#00F0FF"));
				TMCanvas.setMenuSelectedContents(0);
				TMCanvas.setMenuInsertedCDI(new TextContentsTypeDependentInfo("#FFFFFF",'Courier New','bold',25));
				TMCanvas.setMenuInsertedCV("UI Interaction Test");
				}); 
		});
	
		$('#dd_shapetype').on('hide.bs.dropdown', function (event) {
		  console.log(event.relatedTarget);
		});

	</script>
  </body>
</html>
